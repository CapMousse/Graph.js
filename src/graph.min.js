!function(){function t(t,i,o){if(this.options={paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,showCircle:!1,circle:"#55AA77",circleSize:4,background:"#FFFFFF",showZeroLine:!1,centerZero:!1,zeroLineColor:"#EEE",lineColor:"#C5C5C5",lineWidth:3,showBounds:!1,bounds:"#8888EE",boundsHeight:14,boundsFont:"Arial"},!Array.isArray(t))throw new Error("Data is not an array");if(!i||!i.nodeName||"CANVAS"!==i.nodeName)throw new Error("Canvas not defined");if(this.data=t,this.canvas=i,this.context=i.getContext("2d"),o)for(var s in o)o.hasOwnProperty(s)&&(this.options[s]=o[s]);this.init(),this.draw()}t.prototype.init=function(){this.options.showBounds&&(this.options.paddingLeft=this.options.paddingLeft||this.options.boundsHeight/1.4,this.options.paddingTop=this.options.paddingTop||1.4*this.options.boundsHeight,this.options.paddingBottom=this.options.paddingBottom||1.4*this.options.boundsHeight),this.options.showCircle&&(this.options.paddingRight=this.options.paddingRight||this.options.circleSize,this.options.paddingTop=this.options.paddingTop||this.options.circleSize,this.options.paddingBottom=this.options.paddingBottom||this.options.circleSize),this.options.paddingTop=this.options.paddingTop||this.options.lineWidth,this.options.paddingBottom=this.options.paddingBottom||this.options.lineWidth},t.prototype.draw=function(){this.drawBackground(),this.computeScale(),this.drawMiddle(),this.drawScale(),this.drawData(),this.drawCircle(),this.drawBounds()},t.prototype.drawBackground=function(){this.context.fillStyle=this.options.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.computeScale=function(){var t=this.canvas.height,i=this.canvas.width;this.maxPositive=Math.abs(Math.max.apply(null,this.data)),this.maxNegative=Math.abs(Math.min.apply(null,this.data)),this.max=Math.max(this.maxPositive,this.maxNegative),t-=this.options.paddingTop+this.options.paddingBottom,i-=this.options.paddingLeft+this.options.paddingRight,this.horizontalScale=i/(this.data.length-1),this.options.centerZero?(this.middle=Math.round(t/2),this.verticalScale=this.middle/this.max):(this.verticalScale=t/(this.maxPositive+this.maxNegative),this.middle=Math.round(this.maxPositive*this.verticalScale))},t.prototype.drawMiddle=function(){this.options.showZeroLine&&(this.context.moveTo(this.options.paddingLeft,this.middle+this.options.paddingTop),this.context.lineTo(this.canvas.width-this.options.paddingRight,this.middle+this.options.paddingTop),this.context.strokeStyle=this.options.zeroLineColor,this.context.stroke())},t.prototype.drawScale=function(){this.options.showBounds&&(this.context.moveTo(this.options.paddingLeft,this.options.paddingTop),this.context.lineTo(this.options.paddingLeft,this.canvas.height-this.options.paddingBottom),this.context.strokeStyle=this.options.zeroLineColor,this.context.stroke())},t.prototype.drawData=function(){var t=this.data.length-2;for(this.context.strokeStyle=this.options.lineColor,this.context.lineWidth=this.options.lineWidth,this.context.beginPath(),this.context.moveTo.apply(this.context,this.getPointCoordinates(this.data.length-1));t>=0;t--)this.context.lineTo.apply(this.context,this.getPointCoordinates(t));this.context.stroke()},t.prototype.getPointCoordinates=function(t){return[this.options.paddingLeft+t*this.horizontalScale,this.middle+this.options.paddingTop-this.verticalScale*this.data[t]]},t.prototype.drawCircle=function(){if(this.options.showCircle){var t=this.getPointCoordinates(this.data.length-1);this.context.fillStyle=this.options.circle,this.context.beginPath(),this.context.arc(t[0],t[1],this.options.circleSize,0,2*Math.PI),this.context.closePath(),this.context.fill()}},t.prototype.drawBounds=function(){if(this.options.showBounds){var t=this.options.centerZero?this.max:this.maxPositive,i=this.options.centerZero?this.max:this.maxNegative;this.context.font=this.options.boundsHeight+"px "+this.options.boundsFont,this.context.fillStyle=this.options.bounds,this.context.textBaseline="middle",this.context.textAlign="center",this.context.fillText(t,this.options.paddingLeft,this.options.paddingTop-this.options.boundsHeight),this.context.fillText((i?"-":"")+i,this.options.paddingLeft,this.canvas.height-this.options.paddingBottom+this.options.boundsHeight)}},this.Graph=t}(this);