!function(){function t(t,i,o){if(this.options={paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,showCircle:!1,circle:"#55AA77",circleSize:4,background:"#FFFFFF",showZeroLine:!1,zeroLineColor:"#EEE",lineColor:"#8888EE",lineWidth:3,showBounds:!1,bounds:"#8888EE",boundsHeight:14,boundsFont:"Arial"},!Array.isArray(t))throw new Error("Data is not an array");if(!i||!i.nodeName||"CANVAS"!==i.nodeName)throw new Error("Canvas not defined");if(this.data=t,this.canvas=i,this.context=i.getContext("2d"),o)for(var n in o)o.hasOwnProperty(n)&&(this.options[n]=o[n]);this.init()}t.prototype.init=function(){this.options.showBounds&&(this.options.paddingLeft=this.options.paddingLeft<20?20:this.options.paddingLeft,this.options.paddingTop=this.options.paddingTop<20?20:this.options.paddingTop,this.options.paddingBottom=this.options.paddingBottom<20?20:this.options.paddingBottom),this.drawBackground(),this.drawMiddle(),this.computeScale(),this.drawScale(),this.drawData(),this.drawCircle(),this.drawBounds()},t.prototype.drawBackground=function(){this.context.fillStyle=this.options.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawMiddle=function(){if(this.options.showZeroLine){var t=Math.round(this.canvas.height/2);this.context.moveTo(this.options.paddingLeft,t),this.context.lineTo(this.canvas.width-this.options.paddingRight,t),this.context.strokeStyle=this.options.zeroLineColor,this.context.stroke()}},t.prototype.computeScale=function(){var t=Math.abs(Math.max.apply(null,this.data)),i=Math.abs(Math.min.apply(null,this.data)),o=this.canvas.height,n=this.canvas.width;this.max=Math.max(t,i),o-=this.options.paddingTop+this.options.paddingBottom,n-=this.options.paddingLeft+this.options.paddingRight,this.verticalScale=o/2/this.max,this.horizontalScale=n/(this.data.length-1)},t.prototype.drawScale=function(){this.options.showBounds&&(this.context.moveTo(this.options.paddingLeft,this.options.paddingTop),this.context.lineTo(this.options.paddingLeft,this.canvas.height-this.options.paddingBottom),this.context.strokeStyle=this.options.zeroLineColor,this.context.stroke())},t.prototype.drawData=function(){var t=this.data.length-2;for(this.context.strokeStyle=this.options.lineColor,this.context.lineWidth=this.options.lineWidth,this.context.beginPath(),this.context.moveTo.apply(this.context,this.getPointCoordinates(this.data.length-1));t>=0;t--)this.context.lineTo.apply(this.context,this.getPointCoordinates(t));this.context.stroke()},t.prototype.getPointCoordinates=function(t){return[this.options.paddingLeft+t*this.horizontalScale,this.canvas.height/2-this.verticalScale*this.data[t]]},t.prototype.drawCircle=function(){if(this.options.showCircle){var t=this.getPointCoordinates(this.data.length-1);this.context.fillStyle=this.options.circle,this.context.beginPath(),this.context.arc(t[0],t[1],this.options.circleSize,0,2*Math.PI),this.context.closePath(),this.context.fill()}},t.prototype.drawBounds=function(){this.options.showBounds&&(this.context.font=this.options.boundsHeight+"px "+this.options.boundsFont,this.context.fillStyle=this.options.bounds,this.context.textBaseline="middle",this.context.textAlign="center",this.context.fillText(this.max,this.options.paddingLeft,this.options.paddingTop-this.options.boundsHeight),this.context.fillText("-"+this.max,this.options.paddingLeft,this.canvas.height-this.options.paddingBottom+this.options.boundsHeight))},this.Graph=t}(this);