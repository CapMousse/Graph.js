!function(){function t(t,o,i){if(this.options={paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,showCircle:!1,circle:"#55AA77",circleSize:4,background:"#FFFFFF",showZeroLine:!1,centerZero:!1,zeroLineColor:"#EEE",lineColor:"#C5C5C5",lineWidth:3,showBounds:!1,bounds:"#8888EE",boundsHeight:14,boundsFont:"Arial"},!Array.isArray(t))throw new Error("Data is not an array");if(!o||!o.nodeName||"CANVAS"!==o.nodeName)throw new Error("Canvas not defined");if(this.data=t,this.canvas=o,this.context=o.getContext("2d"),i)for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n]);this.init(),this.draw()}t.prototype.init=function(){var t=this;t.options.showBounds&&(t.options.paddingLeft=t.options.paddingLeft||t.options.boundsHeight/1.4,t.options.paddingTop=t.options.paddingTop||1.4*t.options.boundsHeight,t.options.paddingBottom=t.options.paddingBottom||1.4*t.options.boundsHeight),t.options.showCircle&&(t.options.paddingRight=t.options.paddingRight||t.options.circleSize,t.options.paddingTop=t.options.paddingTop||t.options.circleSize,t.options.paddingBottom=t.options.paddingBottom||t.options.circleSize),t.options.paddingTop=t.options.paddingTop||t.options.lineWidth,t.options.paddingBottom=t.options.paddingBottom||t.options.lineWidth},t.prototype.draw=function(){var t=this;t.drawBackground(),t.computeScale(),t.drawMiddle(),t.drawScale(),t.drawData(),t.drawCircle(),t.drawBounds()},t.prototype.drawBackground=function(){this.context.fillStyle=this.options.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.computeScale=function(){var t=this,o=t.canvas.height,i=t.canvas.width;t.maxPositive=Math.max.apply(null,t.data),t.maxNegative=Math.min.apply(null,t.data),t.maxPositive==t.maxNegative&&(0==t.maxPositive&&(t.maxPositive=1),t.maxPositive>0&&(t.maxNegative=0),t.maxPositive<0&&(t.maxPositive=0)),t.maxPositive=Math.abs(t.maxPositive),t.maxNegative=Math.abs(t.maxNegative),t.max=Math.max(t.maxPositive,t.maxNegative),o-=t.options.paddingTop+t.options.paddingBottom,i-=t.options.paddingLeft+t.options.paddingRight,t.horizontalScale=i/(t.data.length-1),t.options.centerZero?(t.middle=Math.round(o/2),t.verticalScale=t.middle/t.max):(t.verticalScale=o/(t.maxPositive+t.maxNegative),t.middle=Math.round(t.maxPositive*t.verticalScale))},t.prototype.drawMiddle=function(){var t=this;t.options.showZeroLine&&(t.context.moveTo(t.options.paddingLeft,t.middle+t.options.paddingTop),t.context.lineTo(t.canvas.width-t.options.paddingRight,t.middle+t.options.paddingTop),t.context.strokeStyle=t.options.zeroLineColor,t.context.stroke())},t.prototype.drawScale=function(){var t=this;t.options.showBounds&&(t.context.moveTo(t.options.paddingLeft,t.options.paddingTop),t.context.lineTo(t.options.paddingLeft,t.canvas.height-t.options.paddingBottom),t.context.strokeStyle=t.options.zeroLineColor,t.context.stroke())},t.prototype.drawData=function(){var t=this,o=t.data.length-2;for(t.context.strokeStyle=t.options.lineColor,t.context.lineWidth=t.options.lineWidth,t.context.beginPath(),t.context.moveTo.apply(t.context,t.getPointCoordinates(t.data.length-1));o>=0;o--)t.context.lineTo.apply(t.context,t.getPointCoordinates(o));t.context.stroke()},t.prototype.getPointCoordinates=function(t){return[this.options.paddingLeft+t*this.horizontalScale,this.middle+this.options.paddingTop-this.verticalScale*this.data[t]]},t.prototype.drawCircle=function(){var t,o=this;o.options.showCircle&&(t=o.getPointCoordinates(o.data.length-1),o.context.fillStyle=o.options.circle,o.context.beginPath(),o.context.arc(t[0],t[1],o.options.circleSize,0,2*Math.PI),o.context.closePath(),o.context.fill())},t.prototype.drawBounds=function(){var t,o,i=this;i.options.showBounds&&(t=i.options.centerZero?i.max:i.maxPositive,o=i.options.centerZero?i.max:i.maxNegative,i.context.font=i.options.boundsHeight+"px "+i.options.boundsFont,i.context.fillStyle=i.options.bounds,i.context.textBaseline="middle",i.context.textAlign="center",i.context.fillText(t,i.options.paddingLeft,i.options.paddingTop-i.options.boundsHeight),i.context.fillText((o?"-":"")+o,i.options.paddingLeft,i.canvas.height-i.options.paddingBottom+i.options.boundsHeight))},this.Graph=t}(this);