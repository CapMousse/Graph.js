!function(){function t(t,o,i){if(this.options={paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,showCircle:!1,circle:"#55AA77",circleSize:4,background:"#FFFFFF",showZeroLine:!1,centerZero:!1,zeroLineColor:"#EEE",lineColor:"#C5C5C5",lineWidth:3,showBounds:!1,bounds:"#8888EE",boundsHeight:14,boundsFont:"Arial",showLegend:!1,legend:"#8888EE",legendHeight:14,legendFont:"Arial"},"object"!=typeof t&&!Array.isArray(t))throw new Error("Data is not an array");if(!o||!o.nodeName||"CANVAS"!==o.nodeName)throw new Error("Canvas not defined");if(this.data=t.data?t.data:t,this.legend=t.data?t.legend:!1,this.canvas=o,this.context=o.getContext("2d"),i)for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n]);this.init(),this.draw()}t.prototype.init=function(){var t=this;t.options.parentSize&&(t.canvas.height=t.canvas.parentElement.offsetHeight,t.canvas.width=t.canvas.parentElement.offsetWidth),t.options.showLegend&&(t.options.paddingLeft=t.options.paddingLeft||2*t.options.legendHeight,t.options.paddingRight=t.options.paddingRight||2*t.options.legendHeight,t.options.paddingBottom=t.options.paddingBottom||2.5*t.options.legendHeight),t.options.showBounds&&(t.options.paddingLeft=t.options.paddingLeft||t.options.boundsHeight/1.4,t.options.paddingTop=t.options.paddingTop||1.4*t.options.boundsHeight,t.options.paddingBottom=t.options.paddingBottom||1.4*t.options.boundsHeight),t.options.showCircle&&(t.options.paddingRight=t.options.paddingRight||t.options.circleSize,t.options.paddingTop=t.options.paddingTop||t.options.circleSize,t.options.paddingBottom=t.options.paddingBottom||t.options.circleSize),t.options.paddingTop=t.options.paddingTop||t.options.lineWidth,t.options.paddingBottom=t.options.paddingBottom||t.options.lineWidth},t.prototype.draw=function(){var t=this;t.drawBackground(),t.computeScale(),t.drawMiddle(),t.drawScale(),t.drawData(),t.drawCircle(),t.drawBounds(),t.drawLegend()},t.prototype.drawBackground=function(){this.context.fillStyle=this.options.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.computeScale=function(){var t=this,o=t.canvas.height,i=t.canvas.width;t.maxPositive=Math.max.apply(null,t.data),t.maxNegative=Math.min.apply(null,t.data),t.maxPositive==t.maxNegative&&(0==t.maxPositive&&(t.maxPositive=1),t.maxPositive>0&&(t.maxNegative=0),t.maxPositive<0&&(t.maxPositive=0)),t.maxPositive=Math.abs(t.maxPositive),t.maxNegative=Math.abs(t.maxNegative),t.max=Math.max(t.maxPositive,t.maxNegative),o-=t.options.paddingTop+t.options.paddingBottom,i-=t.options.paddingLeft+t.options.paddingRight,t.horizontalScale=i/(t.data.length-1),t.options.centerZero?(t.middle=Math.round(o/2),t.verticalScale=t.middle/t.max):(t.verticalScale=o/(t.maxPositive-t.maxNegative),t.middle=Math.round(t.maxPositive*t.verticalScale))},t.prototype.drawMiddle=function(){var t=this;t.options.showZeroLine&&(t.context.moveTo(t.options.paddingLeft,t.middle+t.options.paddingTop),t.context.lineTo(t.canvas.width-t.options.paddingRight,t.middle+t.options.paddingTop),t.context.strokeStyle=t.options.zeroLineColor,t.context.stroke())},t.prototype.drawScale=function(){var t=this;t.options.showBounds&&(t.context.moveTo(t.options.paddingLeft,t.options.paddingTop),t.context.lineTo(t.options.paddingLeft,t.canvas.height-t.options.paddingBottom),t.context.strokeStyle=t.options.zeroLineColor,t.context.stroke())},t.prototype.drawData=function(){var t=this,o=t.data.length-2;for(t.context.strokeStyle=t.options.lineColor,t.context.lineWidth=t.options.lineWidth,t.context.beginPath(),t.context.moveTo.apply(t.context,t.getPointCoordinates(t.data.length-1));o>=0;o--)t.context.lineTo.apply(t.context,t.getPointCoordinates(o));t.context.stroke()},t.prototype.getPointCoordinates=function(t){return[this.options.paddingLeft+t*this.horizontalScale,this.middle+this.options.paddingTop-this.verticalScale*this.data[t]]},t.prototype.drawCircle=function(){var t=this;if(t.options.showCircle){var o=t.getPointCoordinates(t.data.length-1);t.context.fillStyle=t.options.circle,t.context.beginPath(),t.context.arc(o[0],o[1],t.options.circleSize,0,2*Math.PI),t.context.closePath(),t.context.fill()}},t.prototype.drawBounds=function(){var t=this;if(t.options.showBounds){var o=t.options.centerZero?t.max:t.maxPositive,i=t.options.centerZero?t.max:t.maxNegative;t.context.font=t.options.boundsHeight+"px "+t.options.boundsFont,t.context.fillStyle=t.options.bounds,t.context.textBaseline="middle",t.context.textAlign="center",console.log(t.showLegend),t.context.fillText(o,t.options.paddingLeft-(t.options.showLegend?t.options.paddingLeft/2:0),t.options.paddingTop-(t.options.showLegend?0:t.options.boundsHeight)),t.context.fillText((i?"-":"")+i,t.options.paddingLeft-(t.options.showLegend?t.options.paddingLeft/2:0),t.canvas.height-t.options.paddingBottom+(t.options.showLegend?0:t.options.boundsHeight))}},t.prototype.drawLegend=function(){var t,o=this,i=o.data.length;if(o.options.showLegend&&o.legend)for(o.context.font=o.options.legendHeight+"px "+o.options.legendFont,o.context.fillStyle=o.options.legend,o.context.textBaseline="middle",o.context.textAlign="center";i>=0;i--)t=o.getPointCoordinates(i),o.context.fillText(o.legend[i],t[0],o.canvas.height-o.options.paddingBottom/2)},this.Graph=t}(this);